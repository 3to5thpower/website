---
title: "ファンコミュニケーションズインターン参加記"
date: 2020-08-09T23:38:56+09:00
draft: true
toc: true
---

株式会社ファンコミュニケーションズさんで  
8月3日から7日までの5日間オンラインインターンをさせていただいたので、  
参加記をまとめたいと思います。


## 参加の経緯
サポーターズさんの22卒対象エンジニア1on1面談イベントで、  
趣味でRustでCコンパイラを作っているという話をしたところ、  
インターンにRustの枠を新しく設けて参加させていただけるというお誘いをいただき、  
参加する運びとなりました。

やー本当に、ありがたいお話です…！

選考は一応エントリーシートの提出, 面接, 技術テストと、  
恐らく普通のインターンと同じような段取りで行われていたと思います。  
(今回が初めてなので確証はないですが…)  

こんな感じで選考を終え、インターン初日を迎えました。
## 成果物
その前に作ったものを説明します。
DSPと呼ばれるWeb広告の配信仲介サーバです。  

スマホなどでポップアップで広告を表示するアプリは、SSPと呼ばれるサーバに表示する広告をリクエストします。  
SSPはそれを受けて複数のDSPに広告をリクエストします。  
それぞれのDSPから渡された広告の中で最も入札金額が高いものがSSPの返却する広告として選ばれるっぽいです。    

DSPの話に戻りますが、SSPに広告を選ばせるために、  
DSPはSSPからリクエストされると持っている広告データの中から適切な広告を1つ選んで返却します。  
広告データには入札金額などは定められていないので、DSPの中でいい感じに決定します。
(ここで機械学習などが使われます。)  

{{< figure src="/img/tech/intern_fancom20/dsp.png" >}}

DSPがやることをまとめると、
1. SSPからのリクエストを受け取る
2. データベースから入っている広告データをn個取ってくる
3. n個の広告のうち、リクエストしてきたアプリケーションをブロック対象としている広告を除外する  
(競合アプリに広告出したりはしないですよね、多分) 
4. 除外後の広告達を機械学習APIに投げ、それぞれの入札金額を決定してもらう
5. SSPのリクエストで指定されていた最低入札金額よりも低い金額の広告を除外
6. 残った広告の中で最も高い入札金額の広告をSSPに返却する

このような流れになります。  

その他DSPが行う作業として、  
- アプリケーションから表示完了の通知を受け取る
- アプリケーションから広告をクリックしたという通知を受け取る
- 全てのリクエスト・レスポンスのログを出力する

などが今回要求されました。

私が今回製作したmini-dspはプログラム部分は全てRustを使って実装しており、  
シンプルな設計と速度が特徴となっています。  

## 一日目


## 一日の流れ
基本的に10時出勤18時退勤でした。  
昼休憩で1時間お休みをもらえたので脳を休めていました。  



## インターンの感想
## 最後に